
                <!DOCTYPE html>
                <html>
                <head>
                <meta charset="utf-8" />
                <style type="text/css">
                table
                  {
                    border-collapse:collapse;
                    width:90%;
                    text-align:center;
                    }
                table,td,th
                  {
                    border:1px solid black;
                  }
                th
                  {
                    height:40px;
                    background-color:#2F4F4F;
                    color:white;
                  }
                .hiddenRow  { display: none; }
                
                </style>
                </head>
                <body >
                <script type="text/javascript"> 
                                
                                function getElementByAttr(tag,attr,value)
                                {
                                    var aElements=document.getElementsByTagName(tag);
                                    var aEle=[];
                                    for(var i=0;i<aElements.length;i++)
                                    {
                                        if(aElements[i].getAttribute(attr)==value)
                                            aEle.push( aElements[i] );
                                    }
                                    return aEle;
                                }
                                window.onload=function()
                                {
                                    var atd=getElementByAttr('td','status','bn');
                                    for(var i=0;i<atd.length;i++){
                                        rowObj = atd[i];                        
                                        var s = rowObj.innerHTML;            
                                        if(s=="fail"){
                                        rowObj.style.backgroundColor="#FF4500";
                                        }else if(s=="success"){rowObj.style.backgroundColor="#00FA9A";}
                                　　}
                                }
                                
                                function show(number){ 
                                    var table = document.getElementById("discript");
                                    //console.log(table);
                                    var tr = document.getElementsByClassName("btr");
                                    //console.log(tr);
                                    for (var i = 0; i < tr.length; i ++){ 
                                        //console.log(tr[i]);
                                        var tds=tr[i]
                                        var tds=tds.getElementsByTagName("td")
                                        var s = tds[tds.length-3].innerHTML;
                                        if(number==1 ){
                                            for (var x = 0; x < 4; x ++){
                                                tds[tds.length-x-1].className= "";}
                                            table.className= "";
                                            }
                                        if(number==2 ){
                                            if(s=="success"){
                                            for (var x = 0; x < 4; x ++){
                                                tds[tds.length-x-1].className= "";}
                                            }else if(s=="fail"){
                                            for (var x = 0; x < 4; x ++){
                                                tds[tds.length-x-1].className= "hiddenRow";}
                                            }
                                            table.className= "hiddenRow";
                                            }
                                            
                                        if(number==3 ){
                                            if(s=="success"){
                                            for (var x = 0; x < 4; x ++){
                                                tds[tds.length-x-1].className= "hiddenRow";}
                                            }else if(s=="fail"){
                                            for (var x = 0; x < 4; x ++){
                                                tds[tds.length-x-1].className= "";}
                                            }
                                            table.className= "";
                                            }
                                    
                                        } 
                                    }
                                function drawCircle(pass, fail){ 
                                    var color = ["#00FA9A","#FF4500"];  
                                    var data = [pass,fail]; 
                                    var text_arr = ["通过", "失败"];
                                
                                    var canvas = document.getElementById("circle");  
                                    var ctx = canvas.getContext("2d");  
                                    var startPoint=0;
                                    var width = 20, height = 10;
                                    var posX = 112 * 2 + 20, posY = 30;
                                    var textX = posX + width + 5, textY = posY + 10;
                                    for(var i=0;i<data.length;i++){  
                                        ctx.fillStyle = color[i];  
                                        ctx.beginPath();  
                                        ctx.moveTo(150,100);   
                                        ctx.arc(150,100,84,startPoint,startPoint+Math.PI*2*(data[i]/(data[0]+data[1])),false);  
                                        ctx.fill();  
                                        startPoint += Math.PI*2*(data[i]/(data[0]+data[1]));  
                                        ctx.fillStyle = color[i];  
                                        ctx.fillRect(posX, posY + 20 * i, width, height);  
                                        ctx.moveTo(posX, posY + 20 * i);  
                                        ctx.font = 'bold 14px';
                                        ctx.fillStyle = color[i];
                                        var percent = text_arr[i] + ":"+data[i];  
                                        ctx.fillText(percent, textX, textY + 20 * i);  
                                }
                            }
                </script>
                <div style ="float:left" class=heading >
                <h2>AutoTestapi 测试报告：耗时0分5.019秒</h2>
                <p>本次执行用例数：20</p>
                <p style="color:red;">错误数量数：3</p>
                <button onclick="show(1)">全部</button>
                <button onclick="show(2)">成功</button>
                <button onclick="show(3)">失败</button>
                </div>
                <div style ="float:left" class=piechart >
                <canvas id="circle" width="400" height="250" <canvas>
                </div>
                </canvas>
                <script>
                drawCircle(17, 3)
                </script>
                <table id=t1>
                <tr>
                <th>用例名</th>
                <th>case名</th>
                <th>执行结果</th>
                <th>用例描述</th>
                <th>log链接</th>
                </tr>
                    <tr class=btr>
                        <td rowspan="2">TestAuthed</td>
                        <td >TestAuthed.testCode</td>
                        <td status=bn>success</td>
                        <td >:测试:xxxxxxxxxxxxxx</td>
                        <td ><a href="TestAuthed/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestAuthed.testStatus</td>
                        <td status=bn>success</td>
                        <td >:测试:xxxxxxxxxxxx</td>
                        <td ><a href="TestAuthed/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td rowspan="2">TestAuthed2</td>
                        <td >TestAuthed2.testCode</td>
                        <td status=bn>fail</td>
                        <td >:测试:xxxxxxxxxxxxxx</td>
                        <td ><a href="TestAuthed2/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestAuthed2.testStatus</td>
                        <td status=bn>success</td>
                        <td >:测试:xxxxxxxxxxxx</td>
                        <td ><a href="TestAuthed2/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td rowspan="16">TestSimple</td>
                        <td >TestSimple.test_func_1</td>
                        <td status=bn>success</td>
                        <td >:测试:writelist获取post方式白名单信息</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_10</td>
                        <td status=bn>success</td>
                        <td >:测试:uid鉴权结果5（企业蓝v）目前为4</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_11</td>
                        <td status=bn>success</td>
                        <td >:测试:uid鉴权6内部系统调用错误</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_12</td>
                        <td status=bn>success</td>
                        <td >:测试:uid鉴权结果7（可开播v户）</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_13</td>
                        <td status=bn>success</td>
                        <td >:测试:uid鉴权结果8（需认证）</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_14</td>
                        <td status=bn>success</td>
                        <td >:测试:uid鉴权结果10（认证失败）</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_15</td>
                        <td status=bn>success</td>
                        <td >:测试:白名单用户海外可开播</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_17</td>
                        <td status=bn>success</td>
                        <td >:测试:uid鉴权结果16（地址为其他校验，16-7）</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_2</td>
                        <td status=bn>success</td>
                        <td >:测试:writelist获取get白名单信息bu</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_3</td>
                        <td status=bn>success</td>
                        <td >:测试:关键词获取</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_4</td>
                        <td status=bn>success</td>
                        <td >:测试:uid为空鉴权</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_5</td>
                        <td status=bn>success</td>
                        <td >:测试:样例展示用</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_6</td>
                        <td status=bn>success</td>
                        <td >:测试:样例国外鉴权结果为14</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_7</td>
                        <td status=bn>fail</td>
                        <td >:测试:uid鉴权结果2(黑名单)</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_8</td>
                        <td status=bn>fail</td>
                        <td >:测试:uid鉴权结果3（灰名单）</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr><tr class=btr>
                        <td >TestSimple.test_func_9</td>
                        <td status=bn>success</td>
                        <td >:测试:uid鉴权结果4（白名单）</td>
                        <td ><a href="TestSimple/2018-04-22214555.log">log</a></td>
                        </tr>
                    </table ><P>具体失败信息：</p>
                    <table id=discript>
                    <tr>
                    <th>用例名称</th>
                    <th>出错方法</th>
                    <th>错误信息</th>
                    </tr>
                            <tr >
                            <td>testexample2</td>
                            <td>testCode</td>
                            <td><br>[2018-04-22 21:46:00,698][15088][logger.py:37][INFO]:Traceback (most recent call last):<br>  File "/Users/bj-m-206380a/Documents/workspace/demos/testcases/testexample2.py", line 31, in testCode<br>    assert 2==1<br>AssertionError<br><br></td>
                            </tr>
                    
                            <tr >
                            <td>testsimpleapi</td>
                            <td>test_func_7</td>
                            <td><br>[2018-04-22 21:45:59,307][15089][logger.py:37][INFO]:Traceback (most recent call last):<br>  File "/Users/bj-m-206380a/Documents/workspace/demos/testcases/testsimpleapi.py", line 58, in func<br>    raise AssertionError("该断言表达式：%s 结果为flase,实际response的校验参数：%s 的值为 %s"%(expression,key,truevalue))<br>AssertionError: 该断言表达式：r_response["msg"]=='暂时不能发布直播内容' 结果为flase,实际response的校验参数：r_response["msg"] 的值为 success<br><br></td>
                            </tr>
                    
                            <tr >
                            <td>testsimpleapi</td>
                            <td>test_func_8</td>
                            <td><br>[2018-04-22 21:45:59,309][15089][logger.py:37][INFO]:Traceback (most recent call last):<br>  File "/Users/bj-m-206380a/Documents/workspace/demos/testcases/testsimpleapi.py", line 58, in func<br>    raise AssertionError("该断言表达式：%s 结果为flase,实际response的校验参数：%s 的值为 %s"%(expression,key,truevalue))<br>AssertionError: 该断言表达式：r_response["msg"]=='暂时不能发布直播内容' 结果为flase,实际response的校验参数：r_response["msg"] 的值为 success<br><br></td>
                            </tr>
                    </table></body></html>